# å¿«é€Ÿä¸Šæ‰‹

Twikoo åˆ†ä¸ºäº‘å‡½æ•°å’Œå‰ç«¯ä¸¤éƒ¨åˆ†ï¼Œéƒ¨ç½²æ—¶è¯·æ³¨æ„ä¿æŒäºŒè€…ç‰ˆæœ¬ä¸€è‡´ã€‚

* [äº‘å‡½æ•°éƒ¨ç½²](#äº‘å‡½æ•°éƒ¨ç½²)æœ‰ 5 ç§æ–¹å¼ï¼Œ[ä¸€é”®éƒ¨ç½²](#ä¸€é”®éƒ¨ç½²)ã€[æ‰‹åŠ¨éƒ¨ç½²](#æ‰‹åŠ¨éƒ¨ç½²)ã€[å‘½ä»¤è¡Œéƒ¨ç½²](#å‘½ä»¤è¡Œéƒ¨ç½²)ã€[Vercel éƒ¨ç½²](#vercel-éƒ¨ç½²)å’Œ[ç§æœ‰éƒ¨ç½²](#ç§æœ‰éƒ¨ç½²)ã€‚
* [å‰ç«¯éƒ¨ç½²](#å‰ç«¯éƒ¨ç½²)æœ‰ 2 ç§æ–¹å¼ï¼Œå¦‚æœæ‚¨çš„ç½‘ç«™ä¸»é¢˜æ”¯æŒ Twikooï¼Œæ‚¨åªéœ€åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š Twikoo å³å¯ï¼›å¦‚æœæ‚¨çš„ç½‘ç«™ä¸»é¢˜ä¸æ”¯æŒ Twikooï¼Œæ‚¨éœ€è¦ä¿®æ”¹æºç æ‰‹åŠ¨å¼•å…¥ Twikoo çš„ js æ–‡ä»¶å¹¶åˆå§‹åŒ–ã€‚

## äº‘å‡½æ•°éƒ¨ç½²

| <div style="width: 6em">éƒ¨ç½²æ–¹å¼</div> | æè¿° |
| ---- | ---- |
| [ä¸€é”®éƒ¨ç½²](#ä¸€é”®éƒ¨ç½²) | [ ä¸å»ºè®® ] è™½ç„¶æ–¹ä¾¿ï¼Œä½†æ˜¯ä»…æ”¯æŒæŒ‰é‡è®¡è´¹ç¯å¢ƒâ€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œ**ä¸€é”®éƒ¨ç½²çš„ç¯å¢ƒï¼Œå½“å…è´¹èµ„æºç”¨å°½åï¼Œå°†ä¼šäº§ç”Ÿè´¹ç”¨**ã€‚ä¸”æŒ‰é‡è®¡è´¹ç¯å¢ƒæ— æ³•åˆ‡æ¢ä¸ºåŒ…å¹´åŒ…æœˆç¯å¢ƒã€‚å…è´¹é¢åº¦æ•°æ®åº“è¯»æ“ä½œæ•°åªæœ‰ 500 æ¬¡ / å¤©ï¼Œ**æ— æ³•æ”¯æ’‘ Twikoo çš„è¿è¡Œéœ€æ±‚**ã€‚ |
| [æ‰‹åŠ¨éƒ¨ç½²](#æ‰‹åŠ¨éƒ¨ç½²) | [ å»ºè®® ] æ‰‹åŠ¨éƒ¨ç½²åˆ°è…¾è®¯äº‘äº‘å¼€å‘ç¯å¢ƒï¼Œåœ¨ä¸­å›½å¤§é™†è®¿é—®é€Ÿåº¦è¾ƒå¿«ã€‚éœ€è¦ä»˜è´¹è´­ä¹°ç¯å¢ƒæ‰èƒ½éƒ¨ç½²ã€‚ |
| [å‘½ä»¤è¡Œéƒ¨ç½²](#å‘½ä»¤è¡Œéƒ¨ç½²) | [ ä¸å»ºè®® ] ä»…é’ˆå¯¹æœ‰ Node.js ç»éªŒçš„å¼€å‘è€…ã€‚ |
| [Vercel éƒ¨ç½²](#vercel-éƒ¨ç½²) | [ å»ºè®® ] é€‚ç”¨äºæƒ³è¦å…è´¹éƒ¨ç½²çš„ç”¨æˆ·ï¼Œåœ¨ä¸­å›½å¤§é™†è®¿é—®é€Ÿåº¦è¾ƒæ…¢ç”šè‡³æ— æ³•è®¿é—®ã€‚ |
| [Railway éƒ¨ç½²](#railway-éƒ¨ç½²) | [ å»ºè®® ] æœ‰å……è¶³çš„å…è´¹é¢åº¦ï¼Œéƒ¨ç½²ç®€å•ï¼Œé€‚åˆå…¨çƒè®¿é—®ã€‚ |
| [Zeabur éƒ¨ç½²](#zeabur-éƒ¨ç½²) | [ å»ºè®® ] æœ‰å……è¶³çš„å…è´¹é¢åº¦ï¼Œéƒ¨ç½²ç®€å•ï¼Œé€‚åˆä¸­å›½å¤§é™†è®¿é—®ã€‚ |
| [ç§æœ‰éƒ¨ç½²](#ç§æœ‰éƒ¨ç½²) | [ å»ºè®® ] é€‚ç”¨äºæœ‰æœåŠ¡å™¨çš„ç”¨æˆ·ï¼Œéœ€è¦è‡ªè¡Œç”³è¯· HTTPS è¯ä¹¦ã€‚ |

### ä¸€é”®éƒ¨ç½²

1. ç‚¹å‡»ä»¥ä¸‹æŒ‰é’®å°† Twikoo ä¸€é”®éƒ¨ç½²åˆ°äº‘å¼€å‘<br>
[![éƒ¨ç½²åˆ°äº‘å¼€å‘](https://main.qcloudimg.com/raw/67f5a389f1ac6f3b4d04c7256438e44f.svg)](https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&appUrl=https%3A%2F%2Fgithub.com%2Fimaegoo%2Ftwikoo&branch=main)
2. è¿›å…¥[ç¯å¢ƒ-ç™»å½•æˆæƒ](https://console.cloud.tencent.com/tcb/env/login)ï¼Œå¯ç”¨â€œåŒ¿åç™»å½•â€
3. è¿›å…¥[ç¯å¢ƒ-å®‰å…¨é…ç½®](https://console.cloud.tencent.com/tcb/env/safety)ï¼Œå°†ç½‘ç«™åŸŸåæ·»åŠ åˆ°â€œWEBå®‰å…¨åŸŸåâ€

### æ‰‹åŠ¨éƒ¨ç½²

å¦‚æœæ‚¨æ‰“ç®—éƒ¨ç½²åˆ°ä¸€ä¸ªç°æœ‰çš„äº‘å¼€å‘ç¯å¢ƒï¼Œè¯·ç›´æ¥ä»ç¬¬ 3 æ­¥å¼€å§‹ã€‚

1. è¿›å…¥[äº‘å¼€å‘CloudBase](https://curl.qcloud.com/KnnJtUom)æ´»åŠ¨é¡µé¢ï¼Œæ»šåŠ¨åˆ°â€œæ–°ç”¨æˆ·ä¸“äº«â€éƒ¨åˆ†ï¼Œé€‰æ‹©é€‚åˆçš„å¥—é¤ï¼Œç‚¹å‡»â€œç«‹å³è´­ä¹°â€ï¼ŒæŒ‰æç¤ºåˆ›å»ºå¥½ç¯å¢ƒã€‚
::: tip æç¤º
* æ¨èåˆ›å»ºä¸Šæµ·ç¯å¢ƒã€‚å¦‚é€‰æ‹©å¹¿å·ç¯å¢ƒï¼Œéœ€è¦åœ¨ `twikoo.init()` æ—¶é¢å¤–æŒ‡å®šç¯å¢ƒ `region: "ap-guangzhou"`
* ç¯å¢ƒåç§°è‡ªç”±å¡«å†™
* æ¨èé€‰æ‹©è®¡è´¹æ–¹å¼`åŒ…å¹´åŒ…æœˆ`ï¼Œå¥—é¤ç‰ˆæœ¬`åŸºç¡€ç‰ˆ 1`ï¼Œè¶…å‡ºå…è´¹é¢åº¦ä¸ä¼šæ”¶è´¹
* å¦‚æœæç¤ºé€‰æ‹©â€œåº”ç”¨æ¨¡æ¿â€ï¼Œè¯·é€‰æ‹©â€œç©ºæ¨¡æ¿â€
:::
2. è¿›å…¥[äº‘å¼€å‘æ§åˆ¶å°](https://console.cloud.tencent.com/tcb/)<br>
3. è¿›å…¥[ç¯å¢ƒ-ç™»å½•æˆæƒ](https://console.cloud.tencent.com/tcb/env/login)ï¼Œå¯ç”¨â€œåŒ¿åç™»å½•â€
4. è¿›å…¥[ç¯å¢ƒ-å®‰å…¨é…ç½®](https://console.cloud.tencent.com/tcb/env/safety)ï¼Œå°†ç½‘ç«™åŸŸåæ·»åŠ åˆ°â€œWEBå®‰å…¨åŸŸåâ€
5. è¿›å…¥[ç¯å¢ƒ-äº‘å‡½æ•°](https://console.cloud.tencent.com/tcb/scf/index)ï¼Œç‚¹å‡»â€œæ–°å»ºäº‘å‡½æ•°â€
6. å‡½æ•°åç§°è¯·å¡«å†™ï¼š`twikoo`ï¼Œåˆ›å»ºæ–¹å¼è¯·é€‰æ‹©ï¼š`ç©ºç™½å‡½æ•°`ï¼Œè¿è¡Œç¯å¢ƒè¯·é€‰æ‹©ï¼š`Nodejs 10.15`ï¼Œå‡½æ•°å†…å­˜è¯·é€‰æ‹©ï¼š`128MB`ï¼Œç‚¹å‡»â€œä¸‹ä¸€æ­¥â€
7. æ¸…ç©ºè¾“å…¥æ¡†ä¸­çš„ç¤ºä¾‹ä»£ç ï¼Œå¤åˆ¶ä»¥ä¸‹ä»£ç ã€ç²˜è´´åˆ°â€œå‡½æ•°ä»£ç â€è¾“å…¥æ¡†ä¸­ï¼Œç‚¹å‡»â€œç¡®å®šâ€
``` js
exports.main = require('twikoo-func').main
```
8. åˆ›å»ºå®Œæˆåï¼Œç‚¹å‡»â€œtwikoo"è¿›å…¥äº‘å‡½æ•°è¯¦æƒ…é¡µï¼Œè¿›å…¥â€œå‡½æ•°ä»£ç â€æ ‡ç­¾ï¼Œç‚¹å‡»â€œæ–‡ä»¶ - æ–°å»ºæ–‡ä»¶â€ï¼Œè¾“å…¥ `package.json`ï¼Œå›è½¦
9. å¤åˆ¶ä»¥ä¸‹ä»£ç ã€ç²˜è´´åˆ°ä»£ç æ¡†ä¸­ï¼Œç‚¹å‡»â€œä¿å­˜å¹¶å®‰è£…ä¾èµ–â€
``` json
{ "dependencies": { "twikoo-func": "1.6.13" } }
```

### å‘½ä»¤è¡Œéƒ¨ç½²

::: warning æ³¨æ„
* è¯·ç¡®ä¿æ‚¨å·²ç»å®‰è£…äº† [Node.js](https://nodejs.org/en/download/)
* è¯·å°†å‘½ä»¤ã€ä»£ç ä¸­â€œæ‚¨çš„ç¯å¢ƒidâ€æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„ç¯å¢ƒid
* ç¬¬ 7 æ­¥ä¼šå¼¹å‡ºæµè§ˆå™¨è¦æ±‚æˆæƒï¼Œéœ€åœ¨æœ‰å›¾å½¢ç•Œé¢çš„ç³»ç»Ÿä¸‹è¿›è¡Œ
* è¯·å‹¿åœ¨ Termux ä¸‹æ“ä½œã€‚è™½ç„¶å¯ä»¥éƒ¨ç½²æˆåŠŸï¼Œä½†æ˜¯ä½¿ç”¨æ—¶ä¼šæŠ¥é”™ `[FUNCTIONS_EXECUTE_FAIL] Error: EACCES: permission denied, open '/var/user/index.js'`
:::

å¦‚æœæ‚¨æ‰“ç®—éƒ¨ç½²åˆ°ä¸€ä¸ªç°æœ‰çš„äº‘å¼€å‘ç¯å¢ƒï¼Œè¯·ç›´æ¥ä»ç¬¬ 3 æ­¥å¼€å§‹ã€‚

1. è¿›å…¥[äº‘å¼€å‘CloudBase](https://curl.qcloud.com/KnnJtUom)æ´»åŠ¨é¡µé¢ï¼Œæ»šåŠ¨åˆ°â€œæ–°ç”¨æˆ·ä¸“äº«â€éƒ¨åˆ†ï¼Œé€‰æ‹©é€‚åˆçš„å¥—é¤ï¼ˆä¸€èˆ¬ 0 å…ƒå¥—é¤å³å¯ï¼‰ï¼Œç‚¹å‡»â€œç«‹å³è´­ä¹°â€ï¼ŒæŒ‰æç¤ºåˆ›å»ºå¥½ç¯å¢ƒã€‚
2. è¿›å…¥[äº‘å¼€å‘æ§åˆ¶å°](https://console.cloud.tencent.com/tcb/)<br>
3. è¿›å…¥[ç¯å¢ƒ-ç™»å½•æˆæƒ](https://console.cloud.tencent.com/tcb/env/login)ï¼Œå¯ç”¨â€œåŒ¿åç™»å½•â€
4. è¿›å…¥[ç¯å¢ƒ-å®‰å…¨é…ç½®](https://console.cloud.tencent.com/tcb/env/safety)ï¼Œå°†ç½‘ç«™åŸŸåæ·»åŠ åˆ°â€œWEBå®‰å…¨åŸŸåâ€
5. å…‹éš†æœ¬ä»“åº“
``` sh
git clone https://github.com/imaegoo/twikoo.git # æˆ– git clone https://e.coding.net/imaegoo/twikoo/twikoo.git
cd twikoo
```
> å¦‚æœæ‚¨æ²¡æœ‰å®‰è£… Gitï¼Œä¹Ÿå¯ä»¥ä» [Release](https://github.com/imaegoo/twikoo/releases) é¡µé¢ä¸‹è½½æœ€æ–°çš„ Source code<br>
> å¦‚æœæ‚¨æ‰€åœ¨çš„åœ°åŒºè®¿é—® Github é€Ÿåº¦æ…¢ï¼Œä¹Ÿå¯ä»¥å°è¯•å¦ä¸€ä¸ªä»“åº“åœ°å€ï¼š[https://imaegoo.coding.net/public/twikoo/twikoo/git](https://imaegoo.coding.net/public/twikoo/twikoo/git)
6. å®‰è£…ä¾èµ–é¡¹
``` sh
npm install -g yarn # å·²å®‰è£… yarn å¯ä»¥è·³è¿‡æ­¤æ­¥
yarn install
```
7. æˆæƒäº‘å¼€å‘ç¯å¢ƒï¼ˆæ­¤å‘½ä»¤ä¼šå¼¹å‡ºæµè§ˆå™¨è¦æ±‚æˆæƒï¼Œéœ€åœ¨æœ‰å›¾å½¢ç•Œé¢çš„ç³»ç»Ÿä¸‹è¿›è¡Œï¼‰
``` sh
yarn run login
```
8. è‡ªåŠ¨éƒ¨ç½²
``` sh
yarn deploy -e æ‚¨çš„ç¯å¢ƒid
```

### Vercel éƒ¨ç½²

::: warning æ³¨æ„
Vercel éƒ¨ç½²çš„ç¯å¢ƒéœ€é…åˆ 1.4.0 ä»¥ä¸Šç‰ˆæœ¬çš„ twikoo.js ä½¿ç”¨
:::

[æŸ¥çœ‹è§†é¢‘æ•™ç¨‹](https://www.bilibili.com/video/BV1Fh411e7ZH)

1. ç”³è¯· [MongoDB](https://www.mongodb.com/cloud/atlas/register) è´¦å·
2. åˆ›å»ºå…è´¹ MongoDB æ•°æ®åº“ï¼ŒåŒºåŸŸæ¨èé€‰æ‹© `AWS / N. Virginia (us-east-1)`
3. åœ¨ Clusters é¡µé¢ç‚¹å‡» CONNECTï¼ŒæŒ‰æ­¥éª¤è®¾ç½®å…è®¸æ‰€æœ‰ IP åœ°å€çš„è¿æ¥ï¼ˆ[ä¸ºä»€ä¹ˆï¼Ÿ](https://vercel.com/support/articles/how-to-allowlist-deployment-ip-address)ï¼‰ï¼Œåˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼Œå¹¶è®°å½•æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼Œè¯·å°†è¿æ¥å­—ç¬¦ä¸²ä¸­çš„ `<password>` ä¿®æ”¹ä¸ºæ•°æ®åº“å¯†ç 
4. ç”³è¯· [Vercel](https://vercel.com/signup) è´¦å·
5. ç‚¹å‡»ä»¥ä¸‹æŒ‰é’®å°† Twikoo ä¸€é”®éƒ¨ç½²åˆ° Vercel<br>
[![](https://vercel.com/button)](https://vercel.com/import/project?template=https://github.com/imaegoo/twikoo/tree/main/src/server/vercel-min)
6. è¿›å…¥ Settings - Environment Variablesï¼Œæ·»åŠ ç¯å¢ƒå˜é‡ `MONGODB_URI`ï¼Œå€¼ä¸ºç¬¬ 3 æ­¥çš„æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
7. è¿›å…¥ Deployments , ç„¶ååœ¨ä»»æ„ä¸€é¡¹åé¢ç‚¹å‡»æ›´å¤šï¼ˆä¸‰ä¸ªç‚¹ï¼‰ , ç„¶åç‚¹å‡»Redeploy , æœ€åç‚¹å‡»ä¸‹é¢çš„Redeploy
8. è¿›å…¥ Overviewï¼Œç‚¹å‡» Domains ä¸‹æ–¹çš„é“¾æ¥ï¼Œå¦‚æœç¯å¢ƒé…ç½®æ­£ç¡®ï¼Œå¯ä»¥çœ‹åˆ° â€œTwikoo äº‘å‡½æ•°è¿è¡Œæ­£å¸¸â€ çš„æç¤º
9. Vercel Domainsï¼ˆåŒ…å« `https://` å‰ç¼€ï¼Œä¾‹å¦‚ `https://xxx.vercel.app`ï¼‰å³ä¸ºæ‚¨çš„ç¯å¢ƒ id

### Railway éƒ¨ç½²

::: warning æ³¨æ„
Railway éƒ¨ç½²çš„ç¯å¢ƒéœ€é…åˆ 1.4.0 ä»¥ä¸Šç‰ˆæœ¬çš„ twikoo.js ä½¿ç”¨
:::

1. åœ¨ [Railway](https://railway.app/dashboard) ç”³è¯·å¹¶ç™»å½•è´¦å·ï¼Œç‚¹å‡» New Project - Provision MongoDBï¼Œåç§°éšæ„
2. æ‰“å¼€ [imaegoo/twikoo-zeabur](https://github.com/imaegoo/twikoo-zeabur) ç‚¹å‡» fork å°†ä»“åº“ fork åˆ°è‡ªå·±çš„è´¦å·ä¸‹
3. å›åˆ° Railway ç‚¹å‡» New - GitHub Repo - Configure GitHub App - æˆæƒ GitHub - é€‰æ‹©åˆšæ‰ fork çš„ä»“åº“ï¼Œç­‰å¾…éƒ¨ç½²å®Œæˆ
4. ç‚¹å¼€ç¯å¢ƒå¡ç‰‡ - Variables - New Variableï¼Œå·¦è¾¹è¾“å…¥ `PORT` å³è¾¹è¾“å…¥ `8080` ç„¶åç‚¹ Addã€‚
5. ç‚¹å¼€ç¯å¢ƒå¡ç‰‡ - Settings - Environment - Domainsï¼Œç»‘å®šä¸€ä¸ªåŸŸåï¼ˆä¾‹å¦‚ `mytwikoo.up.railway.app`ï¼‰
6. åˆ°åšå®¢é…ç½®æ–‡ä»¶ä¸­é…ç½® envId ä¸º `https://` åŠ åŸŸåï¼ˆä¾‹å¦‚ `https://mytwikoo.up.railway.app`ï¼‰

### Zeabur éƒ¨ç½²

::: warning æ³¨æ„
Zeabur éƒ¨ç½²çš„ç¯å¢ƒéœ€é…åˆ 1.4.0 ä»¥ä¸Šç‰ˆæœ¬çš„ twikoo.js ä½¿ç”¨
:::

1. åœ¨ [Zeabur](https://dash.zeabur.com) ç”³è¯·å¹¶ç™»å½•è´¦å·ï¼Œç‚¹å‡»éƒ¨ç½²æ–°æœåŠ¡ - éƒ¨ç½²å…¶ä»–æœåŠ¡ - éƒ¨ç½² MongoDBï¼Œåç§°éšæ„
2. æ‰“å¼€ [imaegoo/twikoo-zeabur](https://github.com/imaegoo/twikoo-zeabur) ç‚¹å‡» fork å°†ä»“åº“ fork åˆ°è‡ªå·±çš„è´¦å·ä¸‹
3. å›åˆ° Zeabur ç‚¹å‡»éƒ¨ç½²æ–°æœåŠ¡ - éƒ¨ç½²ä½ çš„æºä»£ç  - æˆæƒ GitHub - é€‰æ‹©åˆšæ‰ fork çš„ä»“åº“ï¼Œåç§°éšæ„
  > _æ— éœ€é…ç½®æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼ Zeabur å·²è‡ªåŠ¨é…ç½®_
4. éƒ¨ç½²å¥½åç‚¹å¼€ç¯å¢ƒå¡ç‰‡ - è®¾ç½® - åŸŸåï¼Œç»‘å®šä¸€ä¸ªåŸŸåï¼ˆä¾‹å¦‚ `mytwikoo.zeabur.app`ï¼‰
5. åˆ°åšå®¢é…ç½®æ–‡ä»¶ä¸­é…ç½® envId ä¸º `https://` åŠ åŸŸåï¼ˆä¾‹å¦‚ `https://mytwikoo.zeabur.app`ï¼‰

### ç§æœ‰éƒ¨ç½²

::: warning æ³¨æ„
ç§æœ‰éƒ¨ç½²çš„ç¯å¢ƒéœ€é…åˆ 1.6.0 æˆ–ä»¥ä¸Šç‰ˆæœ¬çš„ twikoo.js ä½¿ç”¨
:::

1. æœåŠ¡ç«¯ä¸‹è½½å®‰è£… [Node.js](https://nodejs.org/zh-cn/)
2. å®‰è£… Twikoo server: `npm i -g tkserver`
3. æ ¹æ®éœ€è¦é…ç½®ç¯å¢ƒå˜é‡

| åç§° | æè¿° | é»˜è®¤å€¼ |
| ---- | ---- | ---- |
| `TWIKOO_DATA` | æ•°æ®åº“å­˜å‚¨è·¯å¾„ | `./data` |
| `TWIKOO_PORT` | ç«¯å£å· | `8080` |
| `TWIKOO_THROTTLE` | IP è¯·æ±‚é™æµï¼Œå½“åŒä¸€ IP çŸ­æ—¶é—´å†…è¯·æ±‚æ¬¡æ•°è¶…è¿‡é˜ˆå€¼å°†å¯¹è¯¥ IP è¿”å›é”™è¯¯ | `250` |

4. å¯åŠ¨ Twikoo server: `tkserver`
5. è®¿é—® `http://æœåŠ¡ç«¯IP:8080`
6. è‹¥èƒ½æ­£å¸¸è®¿é—®ï¼ŒæœåŠ¡ç«¯åœ°å€ï¼ˆåŒ…å« `http://` å’Œç«¯å£å·ï¼Œä¾‹å¦‚ `http://12.34.56.78:8080`ï¼‰å³ä¸ºæ‚¨çš„ç¯å¢ƒ id

::: tip æç¤º
1. Linux æœåŠ¡å™¨å¯ä»¥ç”¨ `nohup tkserver >> tkserver.log 2>&1 &` å‘½ä»¤åå°å¯åŠ¨
2. å¼ºçƒˆå»ºè®®é…ç½®å‰ç½® nginx æœåŠ¡å™¨å¹¶é…ç½® https è¯ä¹¦
3. æ•°æ®åœ¨æœåŠ¡å™¨ä¸Šï¼Œè¯·æ³¨æ„å®šæœŸå¤‡ä»½æ•°æ®
:::

### ç§æœ‰éƒ¨ç½² (Docker)

```
docker run --name twikoo -e TWIKOO_THROTTLE=1000 -p 8080:8080 -v ${PWD}/data:/app/data -d imaegoo/twikoo
```

## å‰ç«¯éƒ¨ç½²

### åœ¨ Hexo ä¸­ä½¿ç”¨

#### åœ¨ [Hexo Butterfly](https://github.com/jerryc127/hexo-theme-butterfly) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [Butterfly å®‰è£æ–‡æª”(å››) ä¸»é¡Œé…ç½®-2](https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96) è¿›è¡Œé…ç½®

#### åœ¨ [Hexo Keep](https://github.com/XPoet/hexo-theme-keep) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [hexo-theme-keep/_config.yml](https://github.com/XPoet/hexo-theme-keep/blob/master/_config.yml) è¿›è¡Œé…ç½®

#### åœ¨ [Hexo Volantis](https://github.com/volantis-x/hexo-theme-volantis) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [hexo-theme-volantis/_config.yml](https://github.com/volantis-x/hexo-theme-volantis/blob/master/_config.yml) è¿›è¡Œé…ç½®

#### åœ¨ [Hexo Ayer](https://github.com/Shen-Yu/hexo-theme-ayer) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [hexo-theme-ayer/_config.yml](https://github.com/Shen-Yu/hexo-theme-ayer/blob/master/_config.yml) è¿›è¡Œé…ç½®

#### åœ¨ [Hexo NexT](https://github.com/next-theme/hexo-theme-next) ä¸»é¢˜ä½¿ç”¨

**æš‚ä¸æ”¯æŒ NexT 8 ä»¥ä¸‹çš„ç‰ˆæœ¬**ï¼Œè¯·å…ˆå‡çº§åˆ° NexT 8ã€‚ç„¶ååœ¨ Hexo é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ

``` sh
# For NexT version >= 8.0.0 && < 8.4.0
npm install hexo-next-twikoo@1.0.0
# For NexT version >= 8.4.0
npm install hexo-next-twikoo@1.0.3
```

ç„¶ååœ¨é…ç½®ä¸­æ·»åŠ 

``` yml
twikoo:
  enable: true
  visitor: true
  envId: xxxxxxxxxxxxxxx # è…¾è®¯äº‘ç¯å¢ƒå¡« envIdï¼›Vercel ç¯å¢ƒå¡«åœ°å€ï¼ˆhttps://xxx.vercel.appï¼‰
  # region: ap-guangzhou # ç¯å¢ƒåœ°åŸŸï¼Œé»˜è®¤ä¸º ap-shanghaiï¼Œè…¾è®¯äº‘ç¯å¢ƒå¡« ap-shanghai æˆ– ap-guangzhouï¼›Vercel ç¯å¢ƒä¸å¡«
```

#### åœ¨ [Hexo Matery](https://github.com/blinkfox/hexo-theme-matery) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [hexo-theme-matery/_config.yml](https://github.com/blinkfox/hexo-theme-matery/blob/develop/_config.yml) è¿›è¡Œé…ç½®

#### åœ¨ [Hexo Icarus](https://github.com/ppoffice/hexo-theme-icarus) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [åŸºäºè…¾è®¯äº‘ï¼Œç»™ä½ çš„ Icarus åšå®¢é…ä¸Š Twikoo è¯„è®ºç³»ç»Ÿ](https://www.anzifan.com/post/icarus_to_candy_2/) by å¼‚æ¬¡å…ƒdeæœºæ™ºå›ğŸ’¯

#### åœ¨ [Hexo MengD(èŒå…¸)](https://github.com/lete114/hexo-theme-MengD) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [hexo-theme-MengD/_config.yml](https://github.com/lete114/hexo-theme-MengD/blob/master/_config.yml) è¿›è¡Œé…ç½®

#### åœ¨ [hexo-theme-fluid](https://github.com/fluid-dev/hexo-theme-fluid) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [é…ç½®æŒ‡å—-è¯„è®º](https://hexo.fluid-dev.com/docs/guide/#%E8%AF%84%E8%AE%BA) è¿›è¡Œé…ç½®

#### åœ¨ [hexo-theme-cards](https://github.com/ChrAlpha/hexo-theme-cards) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [hexo-theme-cards/_config.yml](https://github.com/ChrAlpha/hexo-theme-cards/blob/master/_config.yml) è¿›è¡Œé…ç½®

#### åœ¨ [maupassant-hexo](https://github.com/tufu9441/maupassant-hexo) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [maupassant-hexo/_config.yml](https://github.com/tufu9441/maupassant-hexo/blob/master/_config.yml) è¿›è¡Œé…ç½®

#### åœ¨ [hexo-theme-redefine](https://github.com/EvanNotFound/hexo-theme-redefine) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [Redefine å®˜æ–¹æ–‡æ¡£ #comment](https://redefine-docs.ohevan.com/docs/configuration-guide/comment#twikoo) è¿›è¡Œé…ç½®

#### åœ¨ [hugo-theme-stack](https://github.com/CaiJimmy/hugo-theme-stack) ä¸»é¢˜ä½¿ç”¨

è¯·å‚è€ƒ [Comments | Stack](https://stack.jimmycai.com/config/comments) å’Œ [hugo-theme-stack/config.yaml#L83](https://github.com/CaiJimmy/hugo-theme-stack/blob/master/config.yaml#L83) è¿›è¡Œé…ç½®

### é€šè¿‡ CDN å¼•å…¥

::: tip æç¤º
å¦‚æœæ‚¨ä½¿ç”¨çš„åšå®¢ä¸»é¢˜ä¸æ”¯æŒ Twikooï¼Œå¹¶ä¸”æ‚¨ä¸çŸ¥é“å¦‚ä½•å¼•å…¥ Twikooï¼Œæ‚¨å¯ä»¥[åœ¨ Github æäº¤é€‚é…è¯·æ±‚](https://github.com/imaegoo/twikoo/issues/new)
:::

``` html
<div id="tcomment"></div>
<script src="https://cdn.staticfile.org/twikoo/1.6.13/twikoo.all.min.js"></script>
<script>
twikoo.init({
  envId: 'æ‚¨çš„ç¯å¢ƒid', // è…¾è®¯äº‘ç¯å¢ƒå¡« envIdï¼›Vercel ç¯å¢ƒå¡«åœ°å€ï¼ˆhttps://xxx.vercel.appï¼‰
  el: '#tcomment', // å®¹å™¨å…ƒç´ 
  // region: 'ap-guangzhou', // ç¯å¢ƒåœ°åŸŸï¼Œé»˜è®¤ä¸º ap-shanghaiï¼Œè…¾è®¯äº‘ç¯å¢ƒå¡« ap-shanghai æˆ– ap-guangzhouï¼›Vercel ç¯å¢ƒä¸å¡«
  // path: location.pathname, // ç”¨äºåŒºåˆ†ä¸åŒæ–‡ç« çš„è‡ªå®šä¹‰ js è·¯å¾„ï¼Œå¦‚æœæ‚¨çš„æ–‡ç« è·¯å¾„ä¸æ˜¯ location.pathnameï¼Œéœ€ä¼ æ­¤å‚æ•°
  // lang: 'zh-CN', // ç”¨äºæ‰‹åŠ¨è®¾å®šè¯„è®ºåŒºè¯­è¨€ï¼Œæ”¯æŒçš„è¯­è¨€åˆ—è¡¨ https://github.com/imaegoo/twikoo/blob/main/src/client/utils/i18n/index.js
})
</script>
```

> å»ºè®®ä½¿ç”¨ CDN å¼•å…¥ Twikoo çš„ç”¨æˆ·åœ¨é“¾æ¥åœ°å€ä¸Šé”å®šç‰ˆæœ¬ï¼Œä»¥å…å°†æ¥ Twikoo å‡çº§æ—¶å—åˆ°éå…¼å®¹æ€§æ›´æ–°çš„å½±å“ã€‚

#### æ›´æ¢ CDN é•œåƒ

å¦‚æœé‡åˆ°é»˜è®¤ CDN åŠ è½½é€Ÿåº¦ç¼“æ…¢ï¼Œå¯æ›´æ¢å…¶ä»– CDN é•œåƒã€‚ä»¥ä¸‹ä¸ºå¯ä¾›é€‰æ‹©çš„å…¬å…± CDNï¼Œå…¶ä¸­ä¸€äº› CDN å¯èƒ½éœ€è¦æ•°å¤©æ—¶é—´åŒæ­¥æœ€æ–°ç‰ˆæœ¬ï¼š

* `https://cdn.staticfile.org/twikoo/1.6.13/twikoo.all.min.js`
* `https://lib.baomitu.com/twikoo/1.6.13/twikoo.all.min.js`
* `https://cdn.bootcdn.net/ajax/libs/twikoo/1.6.13/twikoo.all.min.js`
* `https://cdn.jsdelivr.net/npm/twikoo@1.6.13/dist/twikoo.all.min.js`

## å¼€å¯ç®¡ç†é¢æ¿ï¼ˆè…¾è®¯äº‘ç¯å¢ƒï¼‰

1. è¿›å…¥[ç¯å¢ƒ-ç™»å½•æˆæƒ](https://console.cloud.tencent.com/tcb/env/login)ï¼Œç‚¹å‡»â€œè‡ªå®šä¹‰ç™»å½•â€å³è¾¹çš„â€œç§é’¥ä¸‹è½½â€ï¼Œä¸‹è½½ç§é’¥æ–‡ä»¶
2. ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ç§é’¥æ–‡ä»¶ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹
3. ç‚¹å‡»è¯„è®ºçª—å£çš„â€œå°é½¿è½®â€å›¾æ ‡ï¼Œç²˜è´´ç§é’¥æ–‡ä»¶å†…å®¹ï¼Œå¹¶è®¾ç½®ç®¡ç†å‘˜å¯†ç 

é…ç½®å¥½ç™»å½•ç§é’¥ä¹‹åæ— éœ€ç•™å­˜ç§é’¥æ–‡ä»¶ï¼Œè¯·å‹¿å†æ¬¡ä¸‹è½½ç™»å½•ç§é’¥ï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¹‹å‰é…ç½®çš„ç™»å½•ç§é’¥å¤±æ•ˆã€‚

## å¼€å¯ç®¡ç†é¢æ¿ï¼ˆVercel ç¯å¢ƒï¼‰

ç‚¹å‡»è¯„è®ºçª—å£çš„â€œå°é½¿è½®â€å›¾æ ‡ï¼Œè®¾ç½®ç®¡ç†å‘˜å¯†ç 

## ç‰ˆæœ¬æ›´æ–°

ä¸åŒéƒ¨ç½²æ–¹å¼çš„æ›´æ–°æ–¹å¼ä¹Ÿä¸åŒï¼Œè¯·å¯¹å·å…¥åº§ã€‚æ›´æ–°éƒ¨ç½²æˆåŠŸåï¼Œè¯·ä¸è¦å¿˜è®°åŒæ—¶æ›´æ–°å‰ç«¯çš„ Twikoo CDN åœ°å€ä¸­çš„ `x.x.x` æ•°å­—ç‰ˆæœ¬å·ï¼Œä½¿ä¹‹ä¸äº‘å‡½æ•°ç‰ˆæœ¬å·ç›¸åŒï¼Œç„¶åéƒ¨ç½²ç½‘ç«™ã€‚

### é’ˆå¯¹ä¸€é”®éƒ¨ç½²çš„æ›´æ–°æ–¹å¼

ç™»å½•[ç¯å¢ƒ-æˆ‘çš„åº”ç”¨](https://console.cloud.tencent.com/tcb/apps/index)ï¼Œè¾“å…¥

* æ¥æºåœ°å€ï¼š`https://github.com/imaegoo/twikoo/tree/main`
* éƒ¨ç½²åˆ†æ”¯ï¼š`main`

åº”ç”¨ç›®å½•æ— éœ€å¡«å†™ï¼Œç‚¹å‡»â€œç¡®å®šâ€ï¼Œéƒ¨ç½²å®Œæˆã€‚

### é’ˆå¯¹æ‰‹åŠ¨éƒ¨ç½²çš„æ›´æ–°æ–¹å¼

ç™»å½•[ç¯å¢ƒ-äº‘å‡½æ•°](https://console.cloud.tencent.com/tcb/scf/index)ï¼Œç‚¹å‡» twikooï¼Œç‚¹å‡»å‡½æ•°ä»£ç ï¼Œæ‰“å¼€ `package.json` æ–‡ä»¶ï¼Œå°† `"twikoo-func": "x.x.x"` å…¶ä¸­çš„ç‰ˆæœ¬å·ä¿®æ”¹ä¸ºæœ€æ–°ç‰ˆæœ¬å·ï¼Œç‚¹å‡»â€œä¿å­˜å¹¶å®‰è£…ä¾èµ–â€å³å¯ã€‚

::: tip æç¤º
å¦‚æœæ‚¨çš„äº‘å‡½æ•°æ˜¯ 1.0.0 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå› ä¸º 1.0.0 ç‰ˆæœ¬ä¿®æ”¹äº†éƒ¨ç½²æ­¥éª¤ï¼Œè¯·å…ˆå‚è€ƒ[æ‰‹åŠ¨éƒ¨ç½²](#æ‰‹åŠ¨éƒ¨ç½²)ï¼Œä»ç¬¬ 5 æ­¥å¼€å§‹ï¼Œé‡æ–°åˆ›å»ºäº‘å‡½æ•°ï¼Œå†æŒ‰ç…§æ­¤æ­¥éª¤æ›´æ–°ã€‚

å¦‚æœå‡çº§åå‡ºç°æ— æ³•è¯»å–è¯„è®ºåˆ—è¡¨ï¼Œäº‘å‡½æ•°æŠ¥é”™ï¼Œè¯·åœ¨å‡½æ•°ç¼–è¾‘é¡µé¢ï¼Œåˆ é™¤ `node_modules` ç›®å½•ï¼ˆåˆ é™¤éœ€è¦åŠåˆ†é’Ÿå·¦å³ï¼Œè¯·è€å¿ƒç­‰å¾…åˆ é™¤å®Œæˆï¼‰ï¼Œå†ç‚¹å‡»ä¿å­˜å¹¶å®‰è£…ä¾èµ–ã€‚å¦‚æœä»ç„¶ä¸èƒ½è§£å†³ï¼Œè¯·åˆ é™¤å¹¶é‡æ–°åˆ›å»º Twikoo äº‘å‡½æ•°ã€‚
:::

### é’ˆå¯¹å‘½ä»¤è¡Œéƒ¨ç½²çš„æ›´æ–°æ–¹å¼

è¿›å…¥ Twikoo æºç ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ–°ç°æœ‰çš„äº‘å‡½æ•°

``` sh
yarn deploy -e æ‚¨çš„ç¯å¢ƒid
```

### é’ˆå¯¹ Vercel éƒ¨ç½²çš„æ›´æ–°æ–¹å¼

1. è¿›å…¥ [Vercel ä»ªè¡¨æ¿](https://vercel.com/dashboard) - twikoo - Settings - Git
2. ç‚¹å‡» Connected Git Repository ä¸‹æ–¹çš„ä»“åº“åœ°å€
3. æ‰“å¼€ package.jsonï¼Œç‚¹å‡»ç¼–è¾‘
4. å°† `"twikoo-vercel": "x.x.x"` å…¶ä¸­çš„ç‰ˆæœ¬å·ä¿®æ”¹ä¸ºæœ€æ–°ç‰ˆæœ¬å·ã€‚ç‚¹å‡» Commit changes
5. éƒ¨ç½²ä¼šè‡ªåŠ¨è§¦å‘ï¼Œå¯ä»¥å›åˆ° [Vercel ä»ªè¡¨æ¿](https://vercel.com/dashboard)ï¼ŒæŸ¥çœ‹éƒ¨ç½²çŠ¶æ€

### é’ˆå¯¹ç§æœ‰éƒ¨ç½²çš„æ›´æ–°æ–¹å¼

1. åœæ­¢æ—§ç‰ˆæœ¬ `kill $(ps -ef | grep tkserver | grep -v 'grep' | awk '{print $2}')`
2. æ‹‰å–æ–°ç‰ˆæœ¬ `npm i -g tkserver@latest`
3. å¯åŠ¨æ–°ç‰ˆæœ¬ `nohup tkserver >> tkserver.log 2>&1 &`

### é’ˆå¯¹ç§æœ‰éƒ¨ç½² (Docker) çš„æ›´æ–°æ–¹å¼

1. æ‹‰å–æ–°ç‰ˆæœ¬ `docker pull imaegoo/twikoo`
2. åœæ­¢æ—§ç‰ˆæœ¬å®¹å™¨ `docker stop twikoo`
3. åˆ é™¤æ—§ç‰ˆæœ¬å®¹å™¨ `docker rm twikoo`
4. [å¯åŠ¨æ–°ç‰ˆæœ¬å®¹å™¨](#ç§æœ‰éƒ¨ç½²-Docker)

### è‡ªåŠ¨æ›´æ–°

è€ƒè™‘åˆ°å¯ç”¨æ€§å’Œå®‰å…¨æ€§é—®é¢˜ï¼ŒTwikoo æ²¡æœ‰å®ç°è‡ªåŠ¨æ›´æ–°ï¼Œä¹Ÿæ²¡æœ‰è®¡åˆ’å®ç°è‡ªåŠ¨æ›´æ–°ã€‚å¦‚æœæ‚¨å¸Œæœ›å®ç°è‡ªåŠ¨æ›´æ–°ï¼Œå¯ä»¥å‚è€ƒ MHuiG åŸºäº Github å·¥ä½œæµçš„ [twikoo-update](https://github.com/MHuiG/twikoo-update) çš„å®ç°æ–¹å¼ã€‚
